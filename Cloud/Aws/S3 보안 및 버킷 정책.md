# S3 보안 및 버킷 정책

## IAM 정책 (IAM Policy)

- **IAM 사용자, 그룹, 역할**에 권한을 부여하는 방식
- **계정 내부 사용자**에게 주로 적용됨
- JSON 기반 문서
- 예: 특정 IAM 사용자만 `s3:ListBucket` 권한 부여

## S3 버킷 정책 (Bucket Policy)

- **버킷 자체에 부착하는 리소스 기반 정책**
- S3 콘솔이나 CLI에서 버킷 단위로 설정 가능
- **주요 특징**
    - JSON 기반 문서
    - IAM 정책과 달리 **외부 계정(AWS 계정, 역할, 사용자) 또는 익명 사용자(공개 접근)** 까지 지정 가능
    - 버킷 전체 접근 규칙을 설정하는 가장 일반적인 방법
    - 예: 특정 IP 대역만 접근 허용, 특정 계정만 객체 업로드 허용

```json
{
   "Version" : "2012-10-17",
   "Statement": [
      {
        "Sid": "PublicRead",
        "Effect": "Allow",
        "Principal": "*", // 모두에게 허용
        "Action": [
           "s3:GetObject"
        ],
        "Resource":[
           "arn:aws:s3:::examplebucket/*"
        ]
      }
   ]
}
```

- Block Public Access = “퍼블릭 권한 실수 방지 장치”
    - 계정/버킷 단위에서 켜 두면, ACL·버킷 정책·IAM 정책으로 공개를 설정하더라도 **차단됨**
    - 기본적으로 **운영 환경에서는 항상 켜두는 게 보안 모범 사례**

## ACL (Access Control List)

- **객체 단위/버킷 단위로 적용 가능한 가장 오래된 권한 관리 방식**
- 개별 객체/버킷에 대해 **읽기/쓰기 권한**을 부여
- 세밀한 제어보다는 단순 공개/비공개용
- 현재는 **세밀한 권한 제어는 정책(IAM/버킷 정책)을 쓰고, ACL은 최소한으로만 사용**하는 것이 권장
