# 1. 🔍 Stale Value(만료된 값) 정의

**Stale Value란** 클라이언트(프론트엔드)가 가지고 있는 데이터가 더 이상 **최신 상태임을 보장할 수 없는 상태**,

즉 **‘신선하지 않은’ 데이터**를 의미합니다.

### ✅ 발생 이유

- 데이터를 가져온 후 **시간이 경과함**.
- 클라이언트가 모르는 사이에 **서버의 원본 데이터가 변경됨** (다른 사용자 또는 시스템에 의해).

---

# 2. `staleTime`과 `cacheTime`

프론트엔드 캐싱 라이브러리에서 데이터의 생명주기를 관리하는 두 가지 핵심 개념입니다.

### ✅ 개념 비교 표

| 구분 | **staleTime** (신선함 유지 시간) | **cacheTime** (캐시 보존 시간) |
| --- | --- | --- |
| **목적** | 데이터의 **신선도 판단**하여 **재요청(Refetch)** 시점을 결정 | 사용하지 않는 데이터를 **메모리에 보존하는 시간**을 결정 |
| **상태 변화** | Fresh → Stale | Inactive → 삭제(GC) |
| **시간 시작** | 데이터 **패치 완료 시점부터** | 마지막 컴포넌트 **언마운트 시점부터** |
| **효과** | Fresh 상태 동안 불필요한 API 호출 방지 | 컴포넌트 재마운트 시 **로딩 없이 데이터 즉시 표시** |

---

# 3. 키(Key) 기반 캐시 관리

캐싱 라이브러리는 데이터를 가져올 때 지정한 **고유한 쿼리 키(Query Key)** 기준으로 데이터를 저장하고 관리합니다.

- 컴포넌트가 화면에서 언마운트되어도(`cacheTime` 동안) 메모리에 남아있는 데이터는 바로 이 **쿼리 키에 연결된 캐시 데이터**입니다.
- 이 캐시 데이터가 **"일단 그리고 백그라운드로 데이터 다시 받아오는"** 과정의 기본이 됩니다.
