# 상속 : 코드 재사용의 함정

## 상속이란?

부모 클래스가 가지고 있는 상태와 행동을 자식 클래스가 물려 받아서 코드를 재사용할 수 있게 해주는 기법을 말한다. 

## 그렇다면 우리는 왜? 상속을 사용할까?

변경에서 가장 큰 악 중 하나인 코드의 중복을 제거하기 위함이다.

## 재사용의 함정 - 빠르고 손쉽게 기능을 추가했지만 문제가 있다.

### 첫번째, 캡슐화 규칙을 위반 해야 한다.

상속은 단순히 부모 클래스의 행동만 상속 받는 것이 아니라, 상태까지 상속 받기 때문에 상속을 제대로 활용하기 위해서는 내부 구현을 알아야 한다. 즉, Public interface에 의존하는 것이 아니라 “코드;CODE”에 의존하는 설계 구조가 되는 것이다.

### 두번째, 부모 클래스와 자식 클래스 간에 강한 결합이 생긴다.

- 자식 클래스에서 호출하는 부모 클래스의 함수가 수정되거나 부모 클래스의 내부 구현이 변경되면 자식 클래스 또한 변경의 영향을 받아 자식클래스 또한 적용해야 하는 문제가 있다.
- 자식 클래스가 메서드 오버라이딩 시, 부모 클래스의 인터페이스를 사용할때 의도하지 않은 동작을 수반하여 예상치 못한 오류를 만날수 있다.
- 객체 지향 이론과 SOLID 규칙을 지키면서 코딩을 하는 이유는 변경의 유연할 설계를 하기 위함인데 상속은 이것을 무력하게 만드는 기법이다.

### 세번째, 변경의 유연함과 규칙이 깨진다.

- 상속 관계는 컴파일 타임에 결정된다. 그런데 객체지향이 추구하는 방향성은 작은 기능들을 조합해 유연하게 문맥을 완성시키는 것인데, 상속 관계의 경우는 컴파일 시점에 결정되기 때문에 런타임 시점에 문맥의 변경이 어렵다.(**OCP 위반**)
- 의도하지 않은 기능을 부모 클래스에게 상속 받아 자식 클래스의 기능 설계(or 규칙)와 상이하게 동작할 수 있는 잠재적 오류가 발생할 수 있는 요소가 내포될 수 있는 문제를 가진다. (**불필요한 기능 상속**)

## 상속은 무조건 나쁜것인가

개발 세상에는 무조건 옳은 정도라는 것은 없다. 주장과 그 주장에 따른 근거가 타당하다면 상속을 사용하여 구현한 기능이 잘못된 구현이라고 말할 수 없다.

상속도 마찬가지다. 개념적으로 명확한 is-a 관계에 있는 경우, 상위 클래스가 확장할 목적으로 설계되었고 상속에 대한 설계도가 문서화 및 최신화 되어 있다면 사용해도 괜찮을 것이다. 

단순히 재사용을 목적으로 사용한다면 글쎄.. 

실무관점에서, 상속은 SI 업체의 경우가 아니고서는 거의 안씀
